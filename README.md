# Домашнее задание к занятию «Базы данных, их типы»

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

### Ответ:

1.1. Для бюджетирования проектов с формированием финансовых аналитических отчетов и прогнозирования рисков, хорошим выбором будет реляционная СУБД, такая как PostgreSQL или Oracle. Реляционные СУБД обеспечивают целостность данных и имеют четкую структуру. Они поддерживают сложные запросы и агрегацию данных, необходимые для финансового анализа и прогнозирования.

1.1.* Для ускорения работы хеширования можно использовать специализированные API, такие как bcrypt или Argon2. Эти API предоставляют оптимизированные алгоритмы хеширования, которые работают быстрее общих хеш-функций.

1.2. Для лендингов и CRM лучше использовать комбинацию разных типов СУБД. Для лендингов, где требуется быстрое чтение и запись данных, можно использовать NoSQL СУБД, такие как MongoDB или Cassandra. Они обеспечивают гибкость и масштабируемость для хранения и обработки больших объемов данных. Для CRM, где важна целостность данных и выполнение сложных запросов, реляционная СУБД, такая как MySQL или Microsoft SQL Server, может быть более подходящим выбором.

1.2.* Да, задачу можно закрыть одной СУБД, используя гибридный подход. Например, можно использовать PostgreSQL в качестве основной реляционной СУБД для CRM, сохранив все данные по лидам и клиентам. В то же время, можно использовать MongoDB в качестве NoSQL СУБД для хранения данных лендингов и их быстрого доступа. При необходимости интеграции данных между двумя СУБД можно использовать механизмы репликации или синхронизации данных.

1.3. Для отдела контроля качества, требующего базу данных с простой и понятной структурой, рекомендуется использовать реляционную СУБД с простыми таблицами и связями между ними. Например, SQLite может быть хорошим выбором, так как он обеспечивает простоту использования и хранение данных в одном файле без необходимости сервера баз данных.

1.3.* Если уже есть реляционная СУБД, используемая для других задач, ее можно расширить для учета базы данных отдела контроля качества. Можно создать новые таблицы или добавить дополнительные поля в существующие таблицы, чтобы хранить информацию о корпоративных нормах и правилах, обучающих материалах и т.д. При этом важно убедиться, что структура данных поддерживает требования отдела контроля качества.

1.4. Для задач логистики, таких как формирование маршрутов доставки и распределение курьеров, рекомендуется использовать графовые базы данных, например Neo4j. Графовые СУБД обладают специализированными алгоритмами для работы со связями и выполняют запросы на поиск оптимальных путей и анализ графовых структур эффективно.

1.4.* В зависимости от требований и объема данных, можно подключить отдел закупок к СУБД логистики или разработать отдельную СУБД для отдела закупок. Если объем данных и сложность задач отдела закупок не являются существенными, то интеграция с СУБД логистики может быть достаточной. В этом случае можно использовать механизмы связи и обмена данными между отделами через общую СУБД.

Однако, если отдел закупок имеет большой объем данных или уникальные требования, рекомендуется создать отдельную СУБД для отдела закупок. Это позволит оптимизировать структуру базы данных и запросы под конкретные потребности отдела закупок, а также обеспечить независимость и масштабируемость в работе с данными закупок.

1.5.* Да, возможно использование одной СУБД для всех перечисленных выше задач. В таком случае хорошим выбором будет реляционная СУБД, такая как PostgreSQL или Microsoft SQL Server, которая предоставляет широкий спектр функций и возможностей. Реляционные СУБД обеспечивают целостность данных, поддержку сложных запросов, возможности аналитики и гибкость в структуре данных.

Однако, следует учитывать, что при использовании одной СУБД для всех задач может потребоваться дополнительное проектирование и оптимизация структуры данных, чтобы удовлетворить требования каждой предметной области. Также необходимо учесть объем данных, производительность и специфические потребности каждой задачи при выборе подходящей СУБД.


---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

### Ответ:

2.1. Для успешного завершения транзакции по пополнению баланса счета телефона, следует учесть следующие шесть действий:

  1. Аутентификация пользователя: Перед началом транзакции необходимо проверить подлинность пользователя, чтобы убедиться, что это правомерный владелец счета. Это может включать ввод учетных данных (логин/пароль), двухфакторную аутентификацию или использование других методов идентификации.

  2. Выбор способа пополнения: Пользователь должен выбрать способ пополнения баланса телефона. Например, это может быть использование кредитной карты, электронного кошелька или автоплатежа.

  3. Ввод данных для платежа: В зависимости от выбранного способа пополнения, пользователь должен ввести соответствующие данные. Например, для кредитной карты это могут быть номер карты, срок действия и CVV-код. Важно обеспечить безопасность передаваемых данных и защиту приватности пользователя.

  4. Проверка доступности средств: Система должна проверить наличие достаточного количества средств на выбранном счете или платежном инструменте. Если средств недостаточно, транзакция может быть отклонена или пользователю предложат выбрать другой способ пополнения.

  5. Обработка платежа: Если доступность средств подтверждена, система должна провести платеж по указанным данным. Это включает связь с платежным шлюзом, передачу информации о платеже, аутентификацию и авторизацию платежа со стороны платежного провайдера.

  6. Подтверждение успешной транзакции: После успешной обработки платежа системой и получения подтверждения от платежного провайдера, необходимо отобразить пользователю уведомление о завершении транзакции, а также обновить баланс счета телефона соответствующим образом.

2.1.* В случае, если пополнение счета телефона происходит через автоплатеж, действия могут быть следующими:

  1. Автоматическое списание средств: Система должна иметь возможность автоматически списывать средства с заранее указанного источника платежа (например, кредитной карты или банковского счета) в заданный период времени или при достижении определенного порога баланса.

  2. Проверка доступности средств: Перед автоматическим списанием средств система должна проверить наличие достаточного количества средств на указанном источнике платежа. Если средств недостаточно, автоплатеж может быть отложен или выполнен при следующей возможности.

  3. Обработка автоплатежа: После успешной проверки доступности средств система должна провести автоматическое списание с указанного источника платежа. Это включает связь с платежным шлюзом и передачу информации о платеже для обработки.

  4. Подтверждение успешного автоплатежа: После успешной обработки автоплатежа системой и получения подтверждения от платежного провайдера, необходимо записать информацию о транзакции и обновить баланс счета телефона соответствующим образом.

  5. Уведомление пользователя: Пользователю следует отправить уведомление о проведенном автоплатеже. Это может быть в виде электронного сообщения, SMS-уведомления или уведомления в мобильном приложении. В уведомлении можно указать дату и время проведенного платежа, сумму и обновленный баланс счета.

  6. Мониторинг автоплатежей: Система должна продолжать мониторить автоплатежи и обрабатывать их в заданный период времени или при условиях, определенных пользователем. Например, можно настроить автоматическое списание средств каждый месяц или при достижении минимального баланса на счете.

Важно отметить, что процесс автоплатежа требует особой осторожности и безопасности. Необходимо обеспечить защиту персональных данных пользователей, использовать шифрование для передачи чувствительных данных и следовать промышленным стандартам безопасности платежей.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

### Ответ:

3.1. Преимущества SQL-систем по отношению к NoSQL:

  1. Сложные запросы и аналитика: SQL-системы предоставляют богатый набор инструментов для выполнения сложных запросов и аналитических операций. Они поддерживают мощные языки запросов, такие как SQL, с широкими возможностями объединения, агрегации, фильтрации и сортировки данных. Это делает SQL-системы удобными для проведения анализа данных, составления отчетов и извлечения ценной информации.

  2. Гибкая модель данных: SQL-системы основываются на реляционной модели данных, которая обеспечивает структурированное хранение данных с четко определенной схемой. Это позволяет легко определять связи между данными и выполнять операции согласно заданным правилам целостности. SQL-системы обладают возможностью устанавливать ограничения на данные, создавать связи между таблицами и использовать транзакции для обеспечения согласованности данных.

  3. ACID-транзакции: SQL-системы обеспечивают ACID-свойства для транзакций (атомарность, согласованность, изолированность, устойчивость). Это означает, что транзакции выполняются надежно и надежно, обеспечивая целостность данных даже в случае сбоев или ошибок. ACID-транзакции особенно важны для приложений, где требуется точность данных и защита от потери информации.

  4. Широкая поддержка: SQL является стандартным языком запросов баз данных и имеет широкую поддержку в индустрии. Существует множество инструментов, библиотек и фреймворков, разработанных для работы с SQL-системами. Это делает SQL-системы удобными для разработчиков, так как они могут использовать знакомые инструменты и ресурсы для работы с данными.

  5. Надежность и масштабируемость: SQL-системы имеют долгую историю развития и оптимизации, что делает их надежными и эффективными. Они обладают возможностями по масштабированию, чтобы обрабатывать большие объемы данных и высокие нагрузки. SQL-системы предлагают различные методы оптимизации запросов и индексацию для улучшения производительности.

3.1.* Преимущества NewSQL систем перед SQL и NoSQL:

  1. Масштабируемость: NewSQL системы объединяют в себе преимущества SQL и NoSQL, предлагая горизонтальное масштабирование на больших кластерах серверов. Они позволяют эффективно обрабатывать огромные объемы данных и обеспечивать высокую доступность и производительность при работе с распределенными системами.

  2. Гибкость модели данных: NewSQL системы поддерживают гибкость модели данных, позволяя хранить как структурированные данные с жесткой схемой, так же и полуструктурированные или неструктурированные данные. Это дает возможность работать с разнообразными типами данных и адаптироваться к меняющимся требованиям приложений.

  3. ACID-транзакции: NewSQL системы сохраняют поддержку ACID-транзакций, обеспечивая надежность и целостность данных. Это важно для приложений, в которых требуется гарантированная согласованность и безопасность транзакций.

  4. Высокая производительность: NewSQL системы стремятся обеспечить высокую производительность при обработке больших объемов данных и выполнении сложных запросов. Они используют различные методы оптимизации запросов, распределение данных и параллельную обработку для достижения максимальной скорости выполнения операций.

  5. Совместимость с экосистемой SQL: NewSQL системы обеспечивают совместимость с существующей экосистемой инструментов и навыков, связанных с SQL. Разработчики могут использовать знакомые языки запросов и инструменты для работы с данными в NewSQL системах.

  6. Горизонтальное масштабирование без потери функциональности: NewSQL системы позволяют горизонтальное масштабирование без потери SQL-функциональности. Это означает, что при увеличении количества узлов в кластере можно сохранить полную поддержку реляционной модели данных и возможность выполнения сложных SQL-запросов.

В целом, NewSQL системы комбинируют преимущества SQL и NoSQL, предлагая гибкость модели данных, масштабируемость и производительность, а также поддержку ACID-транзакций. Это делает их привлекательным выбором для приложений с высокой нагрузкой и требованиями к согласованности и производительности.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*

### Ответ:

При выборе типа СУБД и модели распределенных вычислений для обработки большого количества данных на 1000 машинах, рекомендуется учитывать следующие критерии:

  1. Масштабируемость: Необходимо убедиться, что выбранный тип СУБД и модель распределенных вычислений обладают возможностью горизонтального масштабирования на такое большое количество машин. Это позволит эффективно использовать всю доступную вычислительную мощность и хранить огромный объем данных.

  2. Производительность: Изучить производительность предлагаемых СУБД и моделей распределенных вычислений. Они должны быть способны обрабатывать большое количество вычислений в разумные сроки и обеспечивать высокую скорость выполнения операций.

  3. Распределение данных: Подумать о том, как данные будут распределены по машинам. В зависимости от характеристик приложения и запросов, возможно, потребуется выбрать модель распределения данных, такую как shared-nothing или shared-disk, чтобы обеспечить эффективное распределение нагрузки и достижение высокой производительности.

  4. Требования к согласованности данных: Рассмотреть требования к согласованности данных в приложении. Если требуется строгая согласованность, то стоит обратить внимание на модели распределенных вычислений, которые обеспечивают ACID-транзакции или strong consistency.

  5. Совместимость с инструментами и навыками: Посмотреть, какие типы СУБД и модели распределенных вычислений хорошо поддерживаются нструментами и имеют соответствующий экосистеме инструментов и навыков команды разработки.

Исходя из этих критериев, одной из наиболее подходящих моделей распределенных вычислений для обработки большого количества данных на 1000 машинах может быть shared-nothing архитектура. В такой модели каждая машина работает автономно и содержит свою собственную часть данных. Каждая машина отвечает только за свою часть работы, что позволяет достичь высокой параллельности вычислений и эффективного использования ресурсов.

В отношении типа СУБД, можно рассмотреть реляционные базы данных, такие как NewSQL системы или распределенные SQL-системы. Они обеспечивают сильную согласованность данных, широкий набор инструментов запросов и аналитики, а также ACID-транзакции. Это важно, если ваше приложение требует точности данных и поддержки сложных запросов.

Однако, конкретный выбор СУБД и модели распределенных вычислений зависит от уникальных потребностей приложения, архитектуры и доступных ресурсов. Рекомендуется провести дополнительное исследование и тестирование различных вариантов, чтобы принять окончательное решение, учитывая все факторы, такие как производительность, масштабируемость, согласованность данных и требования вашего приложения. Также, необходимо обратить внимание на поддержку соответствующих инструментов и экосистемы, а также степень зрелости и надежности выбранной СУБД и модели распределенных вычислений.

Некоторые примеры распределенных SQL-СУБД, которые можно рассмотреть для работы с огромным количеством данных и 1000 машинами, включают:

  1. Apache Cassandra: Это распределенная NoSQL-система, которая предоставляет горизонтальное масштабирование и высокую доступность. Она хорошо подходит для работы с большими объемами данных и обладает гибкой моделью данных.

  2. Google Spanner: Это глобально распределенная реляционная SQL-система, разработанная для масштабируемости и гарантированной согласованности. Она может эффективно работать с огромными объемами данных и обеспечивает ACID-транзакции.

  3. CockroachDB: Это распределенная SQL-система, созданная для обеспечения горизонтального масштабирования и высокой доступности. Она предлагает ACID-транзакции и поддержку распределенных операций.

  4. Apache HBase: Это распределенная NoSQL-система, основанная на модели Bigtable от Google. Она предназначена для работы с большими объемами структурированных данных и обладает высокой производительностью и масштабируемостью.

  5. Amazon Redshift: Это полностью управляемая колоночная SQL-система, специально разработанная для аналитических запросов и обработки больших объемов данных. Она предлагает высокую производительность при выполнении сложных аналитических операций.

Стоит учесть, что это всего лишь некоторые примеры СУБД и моделей распределенных вычислений, и рекомендуется провести дополнительное исследование и тестирование, чтобы выбрать наиболее подходящие варианты для конкретного случая использования.

---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
